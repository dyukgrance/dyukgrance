<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dyukgrance | The Essence of Luxury</title>
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Supabase Configuration -->
    <script type="text/javascript">
        const supabaseUrl = 'https://nhqfujphhgdajuhpzohd.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ocWZ1anBoaGdkYWp1aHB6b2hkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MDAxMzYsImV4cCI6MjA4MDE3NjEzNn0.92Ksm8aZUZUq_uolj8dCAWi7pRD6H47vWndn_vjlWek';
        
        // Initialize Supabase Client
        window.supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBlack: '#020202', // Deepest Black
                        brandBlue: '#0F172A', // Deep Midnight Navy (More Premium than Royal Blue)
                        brandGold: '#D4AF37', // Metallic Gold
                        brandGoldLight: '#F9E076', // Shimmer Gold
                        brandWhite: '#F8FAFC', // Off-white for softer contrast
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Montserrat"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #020202; color: #F8FAFC; }
        
        /* Metallic Gold Gradient Text */
        .gold-text {
            background: linear-gradient(to bottom right, #F9E076, #D4AF37, #8C6A18);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Subtle Gold Glow */
        .gold-glow {
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        /* Smooth Scroll */
        html { scroll-behavior: smooth; }
        
        /* Custom Selection Color */
        ::selection {
            background: #D4AF37;
            color: #000;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- COMPONENTS ---

        function Navbar({ setPage }) {
            const [isOpen, setIsOpen] = React.useState(false);
            return (
                <nav className="fixed w-full z-50 bg-brandBlack/90 backdrop-blur-md border-b border-brandGold/20 transition-all duration-300">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between items-center h-24">
                            <div className="text-2xl font-serif tracking-[0.2em] text-white cursor-pointer hover:text-brandGold transition-colors duration-500" onClick={() => setPage('home')}>
                                DYUKGRANCE
                            </div>
                            
                            {/* Desktop Menu */}
                            <div className="hidden md:flex space-x-12">
                                {['Home', 'Collections', 'About'].map((item) => (
                                    <button 
                                        key={item} 
                                        onClick={() => setPage(item.toLowerCase())}
                                        className="text-gray-300 hover:text-brandGold uppercase text-xs tracking-[0.15em] transition-all duration-300 hover:scale-105"
                                    >
                                        {item}
                                    </button>
                                ))}
                            </div>

                            <div className="hidden md:block">
                                <button className="text-brandGold hover:text-white transition-colors duration-300" onClick={() => setPage('collections')}>
                                    <i className="fas fa-shopping-bag text-xl"></i>
                                </button>
                            </div>

                            {/* Mobile Toggle */}
                            <div className="md:hidden">
                                <button onClick={() => setIsOpen(!isOpen)} className="text-brandGold">
                                    <i className="fas fa-bars text-2xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    {/* Mobile Menu */}
                    {isOpen && (
                        <div className="md:hidden bg-brandBlack border-t border-brandGold/20 absolute w-full animate-fade-in">
                            <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                                {['Home', 'Collections', 'About'].map((item) => (
                                    <button
                                        key={item}
                                        onClick={() => { setPage(item.toLowerCase()); setIsOpen(false); }}
                                        className="block px-3 py-4 text-center w-full text-gray-300 hover:text-brandGold uppercase text-sm tracking-widest border-b border-brandGold/10"
                                    >
                                        {item}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>
            );
        }

        function Hero({ setPage }) {
            return (
                <div className="relative h-screen flex items-center justify-center bg-brandBlack overflow-hidden">
                    {/* Background */}
                    <div className="absolute inset-0 opacity-40">
                        <img src="https://images.unsplash.com/photo-1615634260167-c8cdede054de?auto=format&fit=crop&q=80&w=2000" className="w-full h-full object-cover scale-105" />
                    </div>
                    <div className="absolute inset-0 bg-gradient-to-t from-brandBlack via-brandBlack/60 to-transparent"></div>
                    <div className="absolute inset-0 bg-gradient-to-r from-brandBlack/80 to-transparent"></div>
                    
                    <div className="relative z-10 text-center px-4 max-w-5xl mx-auto mt-16 animate-fade-in">
                        <p className="text-brandGold tracking-[0.4em] text-xs md:text-sm uppercase mb-6 animate-pulse font-medium gold-glow">The Essence of Royalty</p>
                        <h1 className="text-5xl md:text-7xl lg:text-8xl font-serif text-white mb-8 leading-tight drop-shadow-2xl">
                            The Best <br/> <span className="gold-text italic pr-2">Aroma</span> For You
                        </h1>
                        <p className="text-gray-300 text-sm md:text-lg font-sans max-w-lg mx-auto mb-10 leading-loose tracking-wide">
                            Experience the art of perfumery with Dyukgrance. A collection of scents designed to captivate the senses and define your presence.
                        </p>
                        <button 
                            onClick={() => setPage('collections')}
                            className="group bg-transparent border border-brandGold/50 text-brandGold hover:bg-brandGold hover:text-brandBlack px-12 py-4 uppercase text-xs font-bold tracking-[0.2em] transition-all duration-500 shadow-[0_0_20px_rgba(212,175,55,0.1)] hover:shadow-[0_0_30px_rgba(212,175,55,0.4)]"
                        >
                            Shop Collection
                        </button>
                    </div>
                </div>
            );
        }

        function CollectionItem({ data }) {
            const handleBuy = () => {
                const text = `Hi Dyukgrance, I'm interested in ordering *${data.name}* for ${data.price}.`;
                window.open(`https://wa.me/23409037475517?text=${encodeURIComponent(text)}`, '_blank');
            };

            return (
                <div className="group relative bg-brandBlue border border-brandGold/10 hover:border-brandGold/40 transition-all duration-700 hover:-translate-y-2">
                    {/* Category Badge if exists */}
                    {data.category && (
                        <div className="absolute top-4 left-4 z-20 bg-brandGold/90 backdrop-blur text-brandBlack text-[10px] font-bold px-3 py-1 uppercase tracking-wider">
                            {data.category}
                        </div>
                    )}
                    <div className="aspect-[3/4] w-full overflow-hidden relative">
                        <img 
                            src={data.image || "https://placehold.co/600x800/111/444"} 
                            alt={data.name}
                            className="h-full w-full object-cover object-center group-hover:scale-110 transition-transform duration-[1.5s] opacity-90 group-hover:opacity-100"
                        />
                        {/* Overlay Button */}
                        <div className="absolute inset-0 flex items-end justify-center pb-8 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-brandBlack via-brandBlack/50 to-transparent">
                            <button 
                                onClick={handleBuy}
                                className="bg-brandGold text-brandBlack px-8 py-3 text-xs font-bold uppercase tracking-wider hover:bg-white transition-colors duration-300 shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-transform"
                            >
                                Order on WhatsApp
                            </button>
                        </div>
                    </div>
                    <div className="p-6 text-center relative">
                        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-12 h-[1px] bg-brandGold/30"></div>
                        <h3 className="text-xl text-white font-serif tracking-wide mb-2 mt-2">{data.name}</h3>
                        <p className="text-sm text-brandGold font-bold tracking-wide mb-3">{data.price}</p>
                        <p className="text-xs text-gray-400 font-sans leading-relaxed max-w-xs mx-auto">{data.description}</p>
                    </div>
                </div>
            );
        }

        function Collections() {
            const [products, setProducts] = React.useState([]);
            const [loading, setLoading] = React.useState(true);

            React.useEffect(() => {
                // 1. Initial Fetch
                const fetchProducts = async () => {
                    if (window.supabase) {
                        const { data, error } = await window.supabase
                            .from('products')
                            .select('*')
                            .order('created_at', { ascending: false });

                        if (!error && data) {
                            setProducts(data);
                        } else if (error) {
                            console.error("Supabase Fetch Error:", error);
                        }
                    }
                    setLoading(false);
                };

                fetchProducts();

                // 2. Realtime Subscriptions
                if (window.supabase) {
                    const channel = window.supabase
                        .channel('public:products')
                        .on('postgres_changes', { event: '*', schema: 'public', table: 'products' }, (payload) => {
                            if (payload.eventType === 'INSERT') {
                                setProducts(prev => [payload.new, ...prev]);
                            } else if (payload.eventType === 'UPDATE') {
                                setProducts(prev => prev.map(p => p.id === payload.new.id ? payload.new : p));
                            } else if (payload.eventType === 'DELETE') {
                                setProducts(prev => prev.filter(p => p.id !== payload.old.id));
                            }
                        })
                        .subscribe();

                    return () => {
                        window.supabase.removeChannel(channel);
                    };
                }
            }, []);

            return (
                <div className="py-24 bg-brandBlack min-h-screen relative">
                    {/* Background Texture */}
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 pointer-events-none"></div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <div className="text-center mb-20">
                            <span className="text-brandGold uppercase tracking-[0.3em] text-xs font-bold mb-2 block">Our Finest Selection</span>
                            <h2 className="text-3xl md:text-5xl font-serif text-white mb-6 uppercase tracking-widest">Top Collections</h2>
                            <div className="w-24 h-0.5 bg-gradient-to-r from-transparent via-brandGold to-transparent mx-auto"></div>
                        </div>

                        {loading ? (
                            <div className="flex justify-center items-center py-20">
                                <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brandGold"></div>
                            </div>
                        ) : (
                            <>
                                {products.length > 0 ? (
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                                        {products.map(p => <CollectionItem key={p.id} data={p} />)}
                                    </div>
                                ) : (
                                    <div className="text-center py-20 border border-brandGold/10 rounded-lg bg-brandBlue/30 backdrop-blur-sm">
                                        <i className="fas fa-box-open text-4xl text-brandGold/50 mb-4"></i>
                                        <p className="text-gray-400 font-sans">Our collection is currently being updated.</p>
                                        <p className="text-xs text-brandGold mt-2">Please check back soon.</p>
                                    </div>
                                )}
                            </>
                        )}
                    </div>
                </div>
            );
        }

        function About() {
            return (
                <div className="py-24 bg-brandBlue text-white relative overflow-hidden">
                    {/* Decorative Elements */}
                    <div className="absolute top-0 right-0 w-96 h-96 bg-brandGold/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2"></div>
                    <div className="absolute bottom-0 left-0 w-[500px] h-[500px] bg-brandGold/5 rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"></div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <div className="grid md:grid-cols-2 gap-16 items-center">
                            <div className="order-2 md:order-1">
                                <h2 className="text-4xl font-serif mb-8 leading-normal">
                                    Crafting <span className="gold-text italic">Timeless</span> <br/> Elegance
                                </h2>
                                <p className="text-gray-300 font-sans leading-relaxed mb-6 text-lg">
                                    Dyukgrance was born from a passion for the extraordinary. We blend rare ingredients from around the world to create scents that tell a story.
                                </p>
                                <p className="text-gray-300 font-sans leading-relaxed text-lg mb-8">
                                    Our philosophy is simple: Luxury is not just what you wear, it's how you feel. Each bottle is a testament to sophistication, designed for those who appreciate the finer things in life.
                                </p>
                                <div className="grid grid-cols-2 gap-8 border-t border-brandGold/20 pt-8">
                                    <div>
                                        <h4 className="text-brandGold font-bold text-3xl font-serif mb-1">100%</h4>
                                        <p className="text-xs text-gray-400 uppercase tracking-[0.2em]">Original Scents</p>
                                    </div>
                                    <div>
                                        <h4 className="text-brandGold font-bold text-3xl font-serif mb-1">24h</h4>
                                        <p className="text-xs text-gray-400 uppercase tracking-[0.2em]">Long Lasting</p>
                                    </div>
                                </div>
                            </div>
                            <div className="relative order-1 md:order-2">
                                <div className="border border-brandGold/30 p-2 rotate-2 hover:rotate-0 transition-transform duration-700 bg-brandBlack/50 backdrop-blur-sm">
                                    <div className="border border-brandGold/20 p-2">
                                        <img src="https://linksharing.samsungcloud.com/a27vmrCjFXfk" className="w-full h-auto shadow-2xl filter brightness-90 contrast-110 hover:brightness-100 transition-all duration-700" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function Footer() {
            return (
                <footer className="bg-black border-t border-brandGold/20 pt-20 pb-10">
                    <div className="max-w-7xl mx-auto px-4 text-center">
                        <h2 className="text-3xl font-serif text-white tracking-[0.3em] mb-8 hover:text-brandGold transition-colors duration-500 cursor-default">DYUKGRANCE</h2>
                        <div className="flex justify-center space-x-12 mb-12">
                            <a href="https://www.instagram.com/dyukgrance?igsh=MWNhdmlsYjk5dzU3ZA==" target="_blank" className="text-gray-500 hover:text-brandGold transition-all transform hover:-translate-y-1 hover:scale-110"><i className="fab fa-instagram text-2xl"></i></a>
                            <a href="#" className="text-gray-500 hover:text-brandGold transition-all transform hover:-translate-y-1 hover:scale-110"><i className="fab fa-facebook text-2xl"></i></a>
                            <a href="https://wa.me/23409037475517" target="_blank" className="text-gray-500 hover:text-brandGold transition-all transform hover:-translate-y-1 hover:scale-110"><i className="fab fa-whatsapp text-2xl"></i></a>
                        </div>
                        <div className="border-t border-brandGold/10 pt-8">
                            <p className="text-xs text-gray-600 font-sans tracking-widest uppercase">&copy; 2025 Dyukgrance Luxury Perfumes. All Rights Reserved.</p>
                        </div>
                    </div>
                </footer>
            );
        }

        function App() {
            const [page, setPage] = React.useState('home');

            // Scroll to top on page change
            React.useEffect(() => {
                window.scrollTo(0,0);
            }, [page]);

            return (
                <div className="min-h-screen flex flex-col font-sans selection:bg-brandGold selection:text-black">
                    <Navbar setPage={setPage} />
                    <main className="flex-grow">
                        {page === 'home' && (
                            <>
                                <Hero setPage={setPage} />
                                <Collections /> 
                                <About />
                            </>
                        )}
                        {page === 'collections' && <Collections />}
                        {page === 'about' && <About />}
                    </main>
                    <Footer />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
